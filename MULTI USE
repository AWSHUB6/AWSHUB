local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Buttons container
local buttons = {}

-- Create AWSHub GUI with buttons (initially hidden)
local function createAWSHub()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AWSHub"
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true -- Ignore Roblox top bar inset
    screenGui.Parent = playerGui

    local frame = Instance.new("Frame", screenGui)
    frame.Size = UDim2.new(0, 250, 0, 320)
    frame.Position = UDim2.new(0.4, 0, 0.4, 0)
    frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    frame.BorderSizePixel = 0
    frame.Active = true
    frame.Draggable = true
    local uicorner = Instance.new("UICorner", frame)
    uicorner.CornerRadius = UDim.new(0, 12)

    local function createButton(text, yPos, callback)
        local btn = Instance.new("TextButton", frame)
        btn.Size = UDim2.new(0.9, 0, 0, 40)
        btn.Position = UDim2.new(0.05, 0, 0, yPos)
        btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        btn.Text = text
        btn.Font = Enum.Font.FredokaOne
        btn.TextSize = 18
        btn.TextColor3 = Color3.new(1, 1, 1)
        btn.AutoButtonColor = true
        local uicornerBtn = Instance.new("UICorner", btn)
        uicornerBtn.CornerRadius = UDim.new(0, 8)

        btn.MouseButton1Click:Connect(callback)
        table.insert(buttons, btn) -- Save to hide/show later
        return btn
    end

    createButton("Dupe Script", 10, function()
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/9871abdel/Y/refs/heads/main/Yorbumm"))()
        end)
        if not success then warn("Failed to load Dupe script:", err) end
    end)

    createButton("Dark Spawner V6", 60, function()
        local success, err = pcall(function()
            local Spawner = loadstring(game:HttpGet("https://gitlab.com/darkiedarkie/dark/-/raw/main/Spawner.lua"))()
            if Spawner and Spawner.Load then
                Spawner.Load()
            end
        end)
        if not success then warn("Failed to load Dark Spawner V6:", err) end
    end)

    createButton("Instant Age 50", 110, function()
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/9871abdel/Yoo/refs/heads/main/Instant%20age%2050"))()
        end)
        if not success then warn("Failed to load Instant Age 50 script:", err) end
    end)

    createButton("Mutation Reroll", 160, function()
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/9871abdel/Mutation-reroll/refs/heads/main/reroll"))()
        end)
        if not success then warn("Failed to load Mutation Reroll script:", err) end
    end)

    createButton("Force Accept Trade", 210, function()
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/9871abdel/auto-aceept/refs/heads/main/Autoo"))()
        end)
        if not success then warn("Failed to load Force Accept Trade script:", err) end
    end)

    createButton("Egg Randomizer", 260, function()
        local success, err = pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/9871abdel/Egg-predict/refs/heads/main/Egg%20predicoo"))()
        end)
        if not success then warn("Failed to load Egg Randomizer script:", err) end
    end)
    
    return screenGui, buttons
end

local awshubGui, awshubButtons = createAWSHub()

-- Hide or show all buttons function
local function setButtonsVisible(visible)
    for _, btn in pairs(awshubButtons) do
        btn.Visible = visible
    end
end

-- ======== Loading Screen ========
local function showLoadingScreen()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AWSHubLoadingScreen"
    screenGui.ResetOnSpawn = false
    screenGui.IgnoreGuiInset = true
    screenGui.Parent = playerGui

    -- Full screen dark green background
    local bg = Instance.new("Frame", screenGui)
    bg.Size = UDim2.new(1, 0, 1, 0)
    bg.Position = UDim2.new(0, 0, 0, 0)
    bg.BackgroundColor3 = Color3.fromRGB(0, 50, 0) -- dark green
    bg.BorderSizePixel = 0

    -- Title text
    local title = Instance.new("TextLabel", bg)
    title.Size = UDim2.new(0, 400, 0, 50)
    title.Position = UDim2.new(0.5, -200, 0.35, 0)
    title.BackgroundTransparency = 1
    title.Font = Enum.Font.FredokaOne
    title.TextSize = 40
    title.TextColor3 = Color3.fromRGB(255, 255, 255) -- white text
    title.Text = "AWSHUB"
    title.TextStrokeTransparency = 0.5
    title.TextStrokeColor3 = Color3.new(0, 0, 0)
    title.TextScaled = true

    -- Progress bar background (black)
    local progressBg = Instance.new("Frame", bg)
    progressBg.Size = UDim2.new(0, 450, 0, 30)
    progressBg.Position = UDim2.new(0.5, -225, 0.5, 0)
    progressBg.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    progressBg.BorderSizePixel = 0
    progressBg.ClipsDescendants = true
    local progressBgCorner = Instance.new("UICorner", progressBg)
    progressBgCorner.CornerRadius = UDim.new(0, 15)

    -- Progress bar fill (bright green)
    local progressFill = Instance.new("Frame", progressBg)
    progressFill.Size = UDim2.new(0, 0, 1, 0)
    progressFill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    progressFill.BorderSizePixel = 0
    local progressFillCorner = Instance.new("UICorner", progressFill)
    progressFillCorner.CornerRadius = UDim.new(0, 15)

    -- Status text (white)
    local statusText = Instance.new("TextLabel", bg)
    statusText.Size = UDim2.new(0, 450, 0, 80)
    statusText.Position = UDim2.new(0.5, -225, 0.58, 0)
    statusText.BackgroundTransparency = 1
    statusText.Font = Enum.Font.SourceSansBold
    statusText.TextSize = 20
    statusText.TextColor3 = Color3.fromRGB(255, 255, 255)
    statusText.TextWrapped = true
    statusText.TextYAlignment = Enum.TextYAlignment.Top
    statusText.Text = "Loading Duper..."

    -- Percent text (white)
    local percentText = Instance.new("TextLabel", bg)
    percentText.Size = UDim2.new(0, 450, 0, 30)
    percentText.Position = UDim2.new(0.5, -225, 0.77, 0)
    percentText.BackgroundTransparency = 1
    percentText.Font = Enum.Font.SourceSans
    percentText.TextSize = 18
    percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
    percentText.Text = "0%"

    -- Estimated time text (white)
    local timeText = Instance.new("TextLabel", bg)
    timeText.Size = UDim2.new(0, 450, 0, 30)
    timeText.Position = UDim2.new(0.5, -225, 0.83, 0)
    timeText.BackgroundTransparency = 1
    timeText.Font = Enum.Font.SourceSans
    timeText.TextSize = 18
    timeText.TextColor3 = Color3.fromRGB(255, 255, 255)
    timeText.Text = "Estimated time: 180 seconds"

    local totalTime = 180
    local startTime = os.clock()
    local progress = 0

    -- Hide buttons during loading
    setButtonsVisible(false)

    local function getStatusMessage(progress)
        if progress <= 25 then
            return "Loading Duper..."
        elseif progress <= 50 then
            return "Loading Dark...\nLoading Freeze...\nTrade..."
        else
            return "Loading Clients...\nBypassing Anti Cheat..."
        end
    end

    while progress < 100 do
        local elapsed = os.clock() - startTime
        progress = math.min((elapsed / totalTime) * 100, 100)

        progressFill.Size = UDim2.new(progress / 100, 0, 1, 0)
        percentText.Text = string.format("%d%%", math.floor(progress))
        statusText.Text = getStatusMessage(progress)

        local timeLeft = math.max(0, math.ceil(totalTime - elapsed))
        timeText.Text = "Estimated time: " .. timeLeft .. " seconds"

        wait(0.1)
    end

    -- Show buttons after loading ends
    setButtonsVisible(true)

    screenGui:Destroy()
end

-- Show loading screen first, then AWSHub GUI
showLoadingScreen()
